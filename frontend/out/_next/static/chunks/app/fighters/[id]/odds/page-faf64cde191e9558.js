(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1361],{80845:function(e,t,r){Promise.resolve().then(r.bind(r,58885))},58885:function(e,t,r){"use strict";r.d(t,{FighterOddsPageClient:function(){return A}});var s=r(41922),n=r(91115),l=r(52711),d=r(78235);let a={default:"border-border bg-card/80 text-foreground [&>svg]:text-foreground [&>svg]:text-opacity-70",destructive:"border-destructive/50 bg-destructive/10 text-destructive [&>svg]:text-destructive"},i=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n="default",...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,d.cn)("relative w-full rounded-xl border p-4 text-sm [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-base [&>svg+div]:pl-6",a[n],r),...l})});i.displayName="Alert";let o=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h5",{ref:t,className:(0,d.cn)("mb-1 font-semibold leading-none tracking-tight",r),...n})});o.displayName="AlertTitle";let c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="AlertDescription";var u=r(6792),x=r(17921),m=r(63979),f=r(97976),h=r(30252),g=r(2896),p=r(48176),v=r(1687),b=r(45208),j=r(15830),N=r(72322),y=r(92590);let _={excellent:"bg-emerald-600/90 text-white border-transparent",good:"bg-emerald-500/15 text-emerald-600 border-emerald-600/30 dark:text-emerald-300",usable:"bg-blue-500/15 text-blue-600 border-blue-600/30 dark:text-blue-300",poor:"bg-amber-500/15 text-amber-600 border-amber-600/30 dark:text-amber-300",no_data:"bg-muted text-muted-foreground border-transparent"},w={excellent:"Excellent",good:"Good",usable:"Usable",poor:"Poor",no_data:"No Data"};function k(e){var t,r;let{tier:n}=e,l=null!==(t=_[n])&&void 0!==t?t:_.no_data;return(0,s.jsx)(y.C,{variant:"outline",className:(0,d.cn)("px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em]",l),children:null!==(r=w[n])&&void 0!==r?r:n})}function C(e){var t,r,d;let{fights:a,selectedFightId:i}=e,o=null!==(t=a.find(e=>e.fight_id===i))&&void 0!==t?t:a[0],c=(0,n.useMemo)(()=>{var e;return(null==o?void 0:null===(e=o.time_series)||void 0===e?void 0:e.length)?o.time_series.filter(e=>"number"==typeof e.odds).map(e=>{var t;let r=new Date(null!==(t=e.timestamp)&&void 0!==t?t:e.timestamp_ms);return{timestamp_ms:e.timestamp_ms,odds:e.odds,label:(0,f.WU)(r,"MMM d")}}):[]},[o]);return o?(0,s.jsxs)(l.Zb,{className:"bg-card/60",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)(l.ll,{className:"text-xl",children:"Betting Odds Timeline"}),(0,s.jsx)("span",{className:"rounded-full border border-primary/30 bg-primary/10 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-primary",children:"Selected fight"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["vs. ",o.opponent," \xb7"," ",o.event," \xb7"," ",o.event_date?(0,f.WU)(new Date(o.event_date),"MMM d, yyyy"):"Date TBA"]})]}),(0,s.jsxs)("div",{className:"text-right text-xs text-muted-foreground",children:[(0,s.jsxs)("p",{children:["Opening:"," ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:null!==(r=o.opening_odds)&&void 0!==r?r:"—"})]}),(0,s.jsxs)("p",{children:["Closing:"," ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:null!==(d=o.closing_odds)&&void 0!==d?d:"—"})]}),(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsx)(k,{tier:o.quality})})]})]})}),(0,s.jsx)(l.aY,{className:"h-80",children:c.length?(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(g.w,{data:c,className:"-mx-4",children:[(0,s.jsx)(p.q,{strokeDasharray:"3 3",opacity:.2}),(0,s.jsx)(v.K,{dataKey:"label",stroke:"currentColor",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),(0,s.jsx)(b.B,{stroke:"currentColor",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:e=>e.toFixed(2)}),(0,s.jsx)(j.u,{content:e=>{let{active:t,payload:r}=e;if(!t||!(null==r?void 0:r.length))return null;let n=r[0].payload;return(0,s.jsxs)("div",{className:"rounded-lg border bg-background/95 p-3 shadow-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,f.WU)(new Date(n.timestamp_ms),"PPpp")}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-foreground",children:[n.odds.toFixed(2)," (decimal)"]})]})}}),(0,s.jsx)(N.x,{type:"monotone",dataKey:"odds",stroke:"hsl(var(--primary))",strokeWidth:2.5,dot:!1,activeDot:{r:6}})]})}):(0,s.jsx)("div",{className:"flex h-full items-center justify-center rounded-2xl bg-muted/40 text-sm text-muted-foreground",children:"No time-series points available for this fight."})})]}):(0,s.jsxs)(l.Zb,{className:"bg-card/60",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{className:"text-base text-muted-foreground",children:"Betting Odds"})}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No odds data available yet. Check back after the next scrape cycle."})})]})}function O(e){let{fights:t,selectedId:r,onSelect:n}=e;return t.length?(0,s.jsx)("div",{className:"grid gap-2",role:"listbox","aria-label":"Available fights",children:t.map(e=>{var t,l;let a=e.fight_id===r;return(0,s.jsxs)("button",{role:"option","aria-selected":a,onClick:()=>null==n?void 0:n(e.fight_id),className:(0,d.cn)("relative flex w-full flex-col gap-2 rounded-xl border border-border/60 border-l-4 px-4 py-3 text-left transition hover:border-primary/40 hover:bg-muted/40",a?"border-l-primary bg-primary/10 shadow-inner ring-2 ring-primary/20":"border-l-transparent"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-semibold",children:["vs. ",e.opponent]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.event," \xb7"," ",e.event_date?(0,f.WU)(new Date(e.event_date),"LLL d, yyyy"):"Date TBA"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,s.jsx)("span",{className:"rounded-full bg-primary/20 px-2 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wider text-primary",children:"Selected"}):null,(0,s.jsx)(k,{tier:e.quality})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Opening:"," ",(0,s.jsx)("strong",{className:"text-foreground",children:null!==(t=e.opening_odds)&&void 0!==t?t:"—"})]}),(0,s.jsxs)("span",{children:["Closing:"," ",(0,s.jsx)("strong",{className:"text-foreground",children:null!==(l=e.closing_odds)&&void 0!==l?l:"—"})]}),(0,s.jsxs)("span",{children:["Points:"," ",(0,s.jsx)("strong",{className:"text-foreground",children:e.num_odds_points})]})]})]},e.fight_id)})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No odds records available for this fighter yet."})}var M=r(69785);function D(e){let{history:t}=e;return t.length?(0,s.jsx)("div",{className:"overflow-x-auto rounded-2xl border",children:(0,s.jsxs)(M.iA,{children:[(0,s.jsx)(M.xD,{children:(0,s.jsxs)(M.SC,{children:[(0,s.jsx)(M.ss,{children:"Event"}),(0,s.jsx)(M.ss,{children:"Opponent"}),(0,s.jsx)(M.ss,{children:"Opening"}),(0,s.jsx)(M.ss,{children:"Closing"}),(0,s.jsx)(M.ss,{children:"Points"}),(0,s.jsx)(M.ss,{children:"Quality"})]})}),(0,s.jsx)(M.RM,{children:t.map(e=>{var t,r,n,l,d;return(0,s.jsxs)(M.SC,{children:[(0,s.jsx)(M.pj,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.event_name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.event_date?(0,f.WU)(new Date(e.event_date),"MMM d, yyyy"):"TBA"})]})}),(0,s.jsx)(M.pj,{className:"text-sm",children:e.opponent_name}),(0,s.jsx)(M.pj,{className:"text-sm",children:null!==(n=e.opening_odds)&&void 0!==n?n:"—"}),(0,s.jsx)(M.pj,{className:"text-sm",children:null!==(d=null!==(l=null===(t=e.closing_range)||void 0===t?void 0:t.end)&&void 0!==l?l:null===(r=e.closing_range)||void 0===r?void 0:r.start)&&void 0!==d?d:"—"}),(0,s.jsx)(M.pj,{className:"text-sm font-semibold",children:e.num_odds_points}),(0,s.jsx)(M.pj,{children:(0,s.jsx)(k,{tier:e.data_quality})})]},e.id)})})]})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"We haven't indexed odds data for this fighter yet. Re-run the scraper or try another athlete."})}function A(e){var t,r,d,a,f,h,g;let{fighterId:p}=e,[v,b]=(0,n.useState)(),{data:j,isLoading:N,error:y}=(0,x.a)({queryKey:["odds","chart",p,void 0],queryFn:()=>(0,m.Cs)(p,h),enabled:!!p,staleTime:3e5}),{data:_,isLoading:w,error:k}=(0,x.a)({queryKey:["odds","history",p,void 0,null==g?void 0:g.limit],queryFn:()=>(0,m.Np)(p,g),enabled:!!p,staleTime:3e5}),M=(0,n.useMemo)(()=>{var e;return null!==(e=null==j?void 0:j.fights)&&void 0!==e?e:[]},[null==j?void 0:j.fights]);(0,n.useEffect)(()=>{!v&&M.length&&b(M[0].fight_id)},[M,v]);let A=null!==(d=null==_?void 0:_.total_fights)&&void 0!==d?d:0,R=(0,n.useMemo)(()=>{var e;return(null==_?void 0:null===(e=_.odds_history)||void 0===e?void 0:e.length)?Math.round(_.odds_history.reduce((e,t)=>e+t.num_odds_points,0)/_.odds_history.length):0},[_]),W=!N&&!w&&!(null==j?void 0:null===(t=j.fights)||void 0===t?void 0:t.length);return(0,s.jsxs)("section",{className:"space-y-8",children:[(y||k)&&(0,s.jsxs)(i,{variant:"destructive",children:[(0,s.jsx)(o,{children:"Unable to load odds"}),(0,s.jsx)(c,{children:null!==(a=null===(r=y||k)||void 0===r?void 0:r.message)&&void 0!==a?a:"Please retry in a moment."})]}),W?(0,s.jsxs)(l.Zb,{className:"bg-card/60",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"Betting Odds"})}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"We don't have betting odds for this fighter yet. Once the next scraper run completes the data will appear here."})})]}):(0,s.jsxs)("div",{className:"grid gap-8 lg:grid-cols-[2fr,1fr]",children:[N?(0,s.jsx)(u.O,{className:"h-96 rounded-2xl"}):(0,s.jsx)(C,{fights:M,selectedFightId:v}),(0,s.jsxs)(l.Zb,{className:"bg-card/60",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"Fights"})}),(0,s.jsx)(l.aY,{className:"space-y-4",children:N?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.O,{className:"h-16 rounded-xl"}),(0,s.jsx)(u.O,{className:"h-16 rounded-xl"}),(0,s.jsx)(u.O,{className:"h-16 rounded-xl"})]}):(0,s.jsx)(O,{fights:M,selectedId:v,onSelect:b})})]})]}),(0,s.jsxs)(l.Zb,{className:"bg-card/60",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsx)(l.ll,{children:"Odds History"}),(0,s.jsxs)("div",{className:"text-xs uppercase tracking-[0.3em] text-muted-foreground",children:[A," fights \xb7 avg ",R," points"]})]})}),(0,s.jsx)(l.aY,{children:w?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.O,{className:"h-12 rounded-xl"}),(0,s.jsx)(u.O,{className:"h-12 rounded-xl"}),(0,s.jsx)(u.O,{className:"h-12 rounded-xl"})]}):(0,s.jsx)(D,{history:null!==(f=null==_?void 0:_.odds_history)&&void 0!==f?f:[]})})]})]})}},92590:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var s=r(41922),n=r(78235);let l={default:"bg-foreground text-background",outline:"border border-border text-foreground"};function d(e){let{className:t,variant:r="default",...d}=e;return(0,s.jsx)("span",{className:(0,n.cn)("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-tight",l[r],t),...d})}},52711:function(e,t,r){"use strict";r.d(t,{Ol:function(){return a},SZ:function(){return o},Zb:function(){return d},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var s=r(41922),n=r(91115),l=r(78235);let d=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("group/card relative rounded-3xl border border-border bg-card text-card-foreground shadow-sm transition-colors",r),...n})});d.displayName="Card";let a=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col gap-2 p-6 pb-0",r),...n})});a.displayName="CardHeader";let i=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg font-semibold tracking-tight",r),...n})});i.displayName="CardTitle";let o=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});o.displayName="CardDescription";let c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-4",r),...n})});c.displayName="CardContent";let u=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},6792:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var s=r(41922),n=r(78235);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-xl bg-muted/50",t),...r})}},69785:function(e,t,r){"use strict";r.d(t,{RM:function(){return a},SC:function(){return i},iA:function(){return l},pj:function(){return c},ss:function(){return o},xD:function(){return d}});var s=r(41922),n=r(78235);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("thead",{className:(0,n.cn)("[&_tr]:border-b [&_tr]:border-border",t),...r})}function a(e){let{className:t,...r}=e;return(0,s.jsx)("tbody",{className:(0,n.cn)("divide-y divide-border/60",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("tr",{className:(0,n.cn)("transition-colors hover:bg-muted/40",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("th",{className:(0,n.cn)("h-10 px-4 text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("td",{className:(0,n.cn)("px-4 py-3 align-middle text-sm",t),...r})}},78235:function(e,t,r){"use strict";r.d(t,{CO:function(){return o},Qm:function(){return l},T_:function(){return i},cn:function(){return n}});var s=r(63955);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.W)(t)}function l(e){var t,r;if(!e)return"";let s=e.trim().split(/\s+/).filter(Boolean);if(0===s.length)return"";if(1===s.length)return s[0].slice(0,2).toUpperCase();let n=null!==(t=s[0][0])&&void 0!==t?t:"",l=null!==(r=s[s.length-1][0])&&void 0!==r?r:"";return"".concat(n).concat(l).toUpperCase()}let d=["bg-blue-500/90 border-blue-500/50","bg-purple-500/90 border-purple-500/50","bg-amber-500/90 border-amber-500/50","bg-emerald-500/90 border-emerald-500/50","bg-rose-500/90 border-rose-500/50","bg-sky-500/90 border-sky-500/50","bg-indigo-500/90 border-indigo-500/50","bg-orange-500/90 border-orange-500/50"],a=new Map;function i(e){var t;let r=null!==(t=null==e?void 0:e.toLowerCase())&&void 0!==t?t:"",s=a.get(r);if(s)return s;if(!e)return a.set(r,d[0]),d[0];let n=0;for(let t=0;t<e.length;t+=1)n=(n<<5)-n+e.charCodeAt(t)|0;let l=Math.abs(n)%d.length,i=d[l];if(a.size>=512){let e=a.keys().next().value;a.delete(e)}return a.set(r,i),i}function o(e){var t;if(!e)return null;if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:"))return e;let r=(t="https://ufc.wolfgangschoenberger.com/api","https://ufc.wolfgangschoenberger.com/api").replace(/\/+$/,""),s=e.replace(/^\/+/,"");return"".concat(r,"/").concat(s)}},17921:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var s=r(37420),n=r(8949);function l(e,t){return(0,n.r)(e,s.z,t)}},63955:function(e,t,r){"use strict";function s(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(s=e(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{W:function(){return s}}),t.Z=s}},function(e){e.O(0,[1933,1688,7976,9358,6194,747,3979,2474,5633,1744],function(){return e(e.s=80845)}),_N_E=e.O()}]);