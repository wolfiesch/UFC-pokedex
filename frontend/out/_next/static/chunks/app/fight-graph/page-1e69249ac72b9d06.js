(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7522],{48847:function(e,t,s){Promise.resolve().then(s.bind(s,38311))},38311:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(41922),l=s(91115),n=s(85691),i=s(26360);let r=["Flyweight","Bantamweight","Featherweight","Lightweight","Welterweight","Middleweight","Light Heavyweight","Heavyweight","Strawweight","Super Heavyweight"];function c(e){var t,s,n,i;let{params:c,onSubmit:o,isLoading:d=!1}=e,[x,m]=(0,l.useState)(c);return(0,l.useEffect)(()=>{m(c)},[c]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(x)},className:"flex h-full flex-col gap-6 overflow-y-auto rounded-3xl border border-slate-800/60 bg-slate-950/60 p-6 shadow-xl",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-slate-400",children:"Configure"}),(0,a.jsx)("p",{className:"text-sm text-slate-300/80",children:"Adjust the query to focus on specific weight divisions, time ranges, or rivalry counts."})]}),(0,a.jsxs)("fieldset",{className:"space-y-4 rounded-2xl border border-slate-800/70 bg-slate-900/40 p-5",children:[(0,a.jsx)("legend",{className:"px-2 text-xs uppercase tracking-[0.3em] text-cyan-300",children:"Weight Class"}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Division",(0,a.jsxs)("select",{value:null!==(t=x.division)&&void 0!==t?t:"",onChange:e=>{let t=e.target.value.trim();m(e=>({...e,division:0===t.length?void 0:t}))},className:"rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-sm font-medium text-slate-100 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400",children:[(0,a.jsx)("option",{value:"",children:"All divisions"}),r.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsxs)("fieldset",{className:"space-y-4 rounded-2xl border border-slate-800/70 bg-slate-900/40 p-5",children:[(0,a.jsx)("legend",{className:"px-2 text-xs uppercase tracking-[0.3em] text-cyan-300",children:"Time Horizon"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Start Year",(0,a.jsx)("input",{type:"number",min:1993,max:new Date().getFullYear(),value:null!==(s=x.startYear)&&void 0!==s?s:"",onChange:e=>{let t=e.target.value;m(e=>({...e,startYear:t?Number.parseInt(t,10):void 0}))},className:"rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-sm font-semibold text-slate-100 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["End Year",(0,a.jsx)("input",{type:"number",min:1993,max:new Date().getFullYear(),value:null!==(n=x.endYear)&&void 0!==n?n:"",onChange:e=>{let t=e.target.value;m(e=>({...e,endYear:t?Number.parseInt(t,10):void 0}))},className:"rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-sm font-semibold text-slate-100 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400"})]})]})]}),(0,a.jsxs)("fieldset",{className:"space-y-4 rounded-2xl border border-slate-800/70 bg-slate-900/40 p-5",children:[(0,a.jsx)("legend",{className:"px-2 text-xs uppercase tracking-[0.3em] text-cyan-300",children:"Density"}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Fight Limit",(0,a.jsx)("input",{type:"number",min:20,max:400,step:10,value:null!==(i=x.limit)&&void 0!==i?i:200,onChange:e=>{let t=e.target.value;m(e=>({...e,limit:t?Number.parseInt(t,10):void 0}))},className:"rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-sm font-semibold text-slate-100 shadow-inner focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border border-slate-700 bg-slate-900 text-cyan-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400",checked:!!x.includeUpcoming,onChange:e=>{let{checked:t}=e.target;m(e=>({...e,includeUpcoming:t}))}}),"Include upcoming fights"]})]}),(0,a.jsx)("button",{type:"submit",className:"mt-auto flex items-center justify-center gap-2 rounded-2xl border border-cyan-400/30 bg-gradient-to-r from-cyan-500/30 via-fuchsia-500/20 to-cyan-500/30 px-6 py-3 text-sm font-bold uppercase tracking-[0.4em] text-slate-100 transition hover:from-cyan-500/40 hover:to-fuchsia-500/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300",disabled:d,children:d?"Loading...":"Refresh Graph"})]})}var o=s(97976);function d(e){let{metadata:t}=e,s=null==t?void 0:t.insights,l=null==t?void 0:t.generated_at;return(0,a.jsxs)("aside",{className:"flex flex-col gap-6 rounded-3xl border border-slate-800/60 bg-slate-950/60 p-6 text-slate-100 shadow-xl",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-slate-400",children:"Insights"}),l&&(0,a.jsxs)("p",{className:"text-xs text-slate-400/80",children:["Generated ",(0,o.WU)(new Date(l),"PPP p")]}),!l&&(0,a.jsx)("p",{className:"text-xs text-slate-400/80",children:"Insights generated alongside the graph aggregation."})]}),s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/40 p-4",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-cyan-300",children:"Network Health"}),(0,a.jsxs)("dl",{className:"mt-3 space-y-2 text-sm text-slate-200",children:["number"==typeof s.network_density&&(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-slate-950/60 px-3 py-2",children:[(0,a.jsx)("dt",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Density"}),(0,a.jsx)("dd",{className:"font-mono text-base",children:s.network_density.toFixed(3)})]}),"number"==typeof s.average_fights_per_fighter&&(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-slate-950/60 px-3 py-2",children:[(0,a.jsx)("dt",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Avg fights / fighter"}),(0,a.jsx)("dd",{className:"font-mono text-base",children:s.average_fights_per_fighter.toFixed(1)})]})]})]}),s.division_breakdown&&s.division_breakdown.length>0&&(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/40 p-4",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-cyan-300",children:"Division Breakdown"}),(0,a.jsx)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:s.division_breakdown.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between rounded-xl bg-slate-950/60 px-3 py-2",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:e.division}),(0,a.jsxs)("span",{className:"font-mono text-base",children:[e.count," (",e.percentage,"%)"]})]},e.division))})]}),s.top_fighters&&s.top_fighters.length>0&&(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/40 p-4",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-cyan-300",children:"Hubs"}),(0,a.jsx)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:s.top_fighters.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between rounded-xl bg-slate-950/60 px-3 py-2",children:[(0,a.jsxs)("span",{className:"flex flex-col text-xs uppercase tracking-[0.3em] text-slate-400",children:[(0,a.jsx)("span",{className:"text-sm font-semibold tracking-normal text-slate-100",children:e.name}),e.division&&(0,a.jsx)("span",{children:e.division})]}),(0,a.jsxs)("span",{className:"flex flex-col items-end font-mono text-base",children:[(0,a.jsxs)("span",{children:[e.total_fights," fights"]}),(0,a.jsxs)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:["degree ",e.degree]})]})]},e.fighter_id))})]}),s.busiest_rivalries&&s.busiest_rivalries.length>0&&(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/40 p-4",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-cyan-300",children:"Rivalries"}),(0,a.jsx)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:s.busiest_rivalries.map(e=>{var t,s;return(0,a.jsxs)("li",{className:"space-y-1 rounded-xl bg-slate-950/60 px-3 py-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-slate-100",children:[null!==(t=e.source_name)&&void 0!==t?t:e.source," vs"," ",null!==(s=e.target_name)&&void 0!==s?s:e.target]}),(0,a.jsxs)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:[e.fights," fights",e.last_event_name&&" • ".concat(e.last_event_name),e.last_event_date&&" • ".concat((0,o.WU)(new Date(e.last_event_date),"PP"))]})]},"".concat(e.source,"-").concat(e.target))})})]})]}):(0,a.jsx)("p",{className:"text-sm text-slate-400/80",children:"Insights will populate automatically once the fight graph loads."})]})}var x=s(21881),m=s(37872),u=s(89338);function h(e){let{graph:t,isLoading:s,error:n,mode:i}=e,r=(0,l.useRef)(null);return!function(e,t,s){let{mode:a}=s,n=(0,l.useRef)();(0,l.useEffect)(()=>{let s=e.current;if(!s)return;let l=new x.xsS;l.background=new x.Ilk(329487),l.fog=new x.yo9(329487,.0125);let i=new x.cPb(60,s.clientWidth/Math.max(s.clientHeight,1),.1,1e3);i.position.set(0,60,160);let r=new m.WebGLRenderer({antialias:!0,alpha:!1});r.setPixelRatio(window.devicePixelRatio),r.setSize(s.clientWidth,s.clientHeight,!1),r.shadowMap.enabled=!1,s.appendChild(r.domElement);let c=new u.z(i,r.domElement);c.enableDamping=!0,c.dampingFactor=.05,c.enablePan=!0,c.minDistance=40,c.maxDistance=400;let o=new x.Mig(6056896,.8),d=new x.Ox3(16777215,.6);d.position.set(60,120,80),l.add(o,d);let h=new x.ZAu;h.name="fight-graph-nodes";let p=new x.ZAu;p.name="fight-graph-links",l.add(h,p);let g=e=>{e.traverse(e=>{if(e instanceof x.Kj0||e instanceof x.x12){var t;null===(t=e.geometry)||void 0===t||t.dispose();let s=e.material;Array.isArray(s)?s.forEach(e=>e.dispose()):s&&s.dispose()}}),e.clear()};if(t&&t.nodes.length>0){let e=new x.xoR({color:new x.Ilk(6740463),emissive:new x.Ilk(988713),shininess:80}),s=new x.xoR({color:new x.Ilk(16328306),emissive:new x.Ilk(3215677),shininess:100}),l=new x.nls({color:2372431,opacity:.55,transparent:!0}),n=new Map;t.nodes.forEach((l,i)=>{let r=Math.PI*(3-Math.sqrt(5))*i,c=1-i/Math.max(t.nodes.length-1,1)*2,o=Math.sqrt(1-c*c),d=new x.Pa4(Math.cos(r)*o*60,"3d"===a?60*c:0,Math.sin(r)*o*60);n.set(l.fighter_id,d);let m=new x.xo$(2.4,24,24),u=new x.Kj0(m,l.total_fights>10?s:e);u.position.copy(d),u.userData=l,h.add(u)}),t.links.forEach(e=>{let t=n.get(e.source),s=n.get(e.target);if(!t||!s)return;let a=new Float32Array([t.x,t.y,t.z,s.x,s.y,s.z]),i=new x.u9r;i.setAttribute("position",new x.TlE(a,3));let r=new x.x12(i,l);r.userData=e,p.add(r)})}let f=()=>{c.update(),r.render(l,i),n.current=requestAnimationFrame(f)};f();let b=()=>{if(!s)return;let{clientWidth:e,clientHeight:t}=s;i.aspect=e/Math.max(t,1),i.updateProjectionMatrix(),r.setSize(e,t,!1)};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),n.current&&cancelAnimationFrame(n.current),g(h),g(p),c.dispose(),r.dispose(),s.removeChild(r.domElement)}},[e,t,a])}(r,t,{mode:i}),(0,a.jsxs)("section",{className:"relative flex h-full min-h-[480px] flex-1 overflow-hidden rounded-3xl border border-slate-800/60 bg-slate-950/60 shadow-xl",children:[(0,a.jsx)("div",{ref:r,className:"relative h-full w-full"}),s&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-slate-950/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"space-y-2 text-center text-slate-200",children:[(0,a.jsx)("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-cyan-200",children:"Loading fight graph"}),(0,a.jsx)("p",{className:"text-xs text-slate-400/80",children:"Fetching latest connections from the API…"})]})}),n&&!s&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-red-950/40 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"max-w-sm space-y-3 rounded-2xl border border-red-500/40 bg-red-900/30 p-6 text-center text-red-100",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-[0.4em]",children:"Failed to load graph"}),(0,a.jsx)("p",{className:"text-xs text-red-100/80",children:n.message})]})}),!s&&!n&&t&&0===t.nodes.length&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-slate-950/40 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"space-y-2 text-center text-slate-200",children:[(0,a.jsx)("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-cyan-200",children:"No fights available"}),(0,a.jsx)("p",{className:"text-xs text-slate-400/80",children:"Adjust the filters to widen the search window."})]})}),(0,a.jsx)("div",{className:"pointer-events-none absolute left-6 top-6 rounded-full border border-slate-800/60 bg-slate-950/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.4em] text-slate-300",children:"3d"===i?"3D View":"2D View"})]})}var p=s(15162);let g={limit:200,includeUpcoming:!1},f=[{label:"3D",value:"3d",icon:(0,a.jsx)(n.Z,{className:"h-4 w-4","aria-hidden":!0})},{label:"2D",value:"2d",icon:(0,a.jsx)(i.Z,{className:"h-4 w-4","aria-hidden":!0})}];function b(){var e;let[t,s]=(0,l.useState)("3d"),[n,i]=(0,l.useState)(g),{data:r,isLoading:o,error:x}=(0,p.P)(n),m=(0,l.useMemo)(()=>o?"Fetching the latest fight rivalries…":x?"Unable to load graph data from the API.":r?"".concat(r.nodes.length," fighters • ").concat(r.links.length," connections"):"Load the graph to explore rivalries in 3D.",[o,x,r]);return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[(0,a.jsx)("header",{className:"border-b border-slate-800/60 bg-slate-950/80 px-6 py-8 shadow-2xl",children:(0,a.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-black uppercase tracking-[0.4em] text-slate-100",children:"Fight Graph"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:m})]}),(0,a.jsx)("nav",{className:"flex items-center gap-3",children:f.map(e=>{let l=t===e.value;return(0,a.jsxs)("button",{type:"button",onClick:()=>s(e.value),className:"group flex items-center gap-2 rounded-full border px-5 py-2 text-sm font-semibold uppercase tracking-[0.3em] transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300 ".concat(l?"border-cyan-400/60 bg-cyan-500/20 text-cyan-200":"border-slate-800 bg-slate-950/60 text-slate-300 hover:border-cyan-400/50 hover:text-cyan-200"),children:[(0,a.jsx)("span",{className:"text-slate-200",children:e.icon}),e.label," View"]},e.value)})})]})}),(0,a.jsx)("main",{className:"mx-auto flex w-full max-w-6xl flex-1 gap-6 px-6 py-8",children:(0,a.jsxs)("div",{className:"grid h-full w-full grid-cols-1 gap-6 lg:grid-cols-[360px_1fr]",children:[(0,a.jsx)(c,{params:n,isLoading:o,onSubmit:e=>i({...e})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(h,{graph:r,isLoading:o,error:x,mode:t}),(0,a.jsx)(d,{metadata:null!==(e=null==r?void 0:r.metadata)&&void 0!==e?e:null})]})]})})]})}},15162:function(e,t,s){"use strict";s.d(t,{P:function(){return r}});var a=s(91115),l=s(17921),n=s(82696),i=s(63979);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{initialData:s=null,enabled:r=!0}=t,c=(0,a.useMemo)(()=>{var t,s,a,l;return["fight-graph",null!==(t=e.division)&&void 0!==t?t:null,null!==(s=e.startYear)&&void 0!==s?s:null,null!==(a=e.endYear)&&void 0!==a?a:null,null!==(l=e.limit)&&void 0!==l?l:null,!!e.includeUpcoming]},[e]);return(0,l.a)({queryKey:c,queryFn:()=>(0,i.bZ)(e),enabled:r,staleTime:12e4,refetchOnWindowFocus:!1,placeholderData:n.Wk,initialData:null!=s?s:void 0})}}},function(e){e.O(0,[8743,7043,1933,1688,7976,9358,3311,747,3979,2474,5633,1744],function(){return e(e.s=48847)}),_N_E=e.O()}]);