(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{80862:function(e,t,r){Promise.resolve().then(r.bind(r,73950))},73950:function(e,t,r){"use strict";r.d(t,{default:function(){return j}});var s=r(41922),n=r(91115),a=r(79185),i=r(74481),o=r(31350),l=r(30289),d=r(2581),c=r(52711),u=r(78235);function m(e){let{entry:t}=e,{attributes:r,listeners:n,setNodeRef:a,transform:i,transition:u,isDragging:m}=(0,o.nB)({id:t.id}),x={transform:l.ux.Transform.toString(i),transition:u,opacity:m?.6:1};return(0,s.jsxs)(c.Zb,{ref:a,style:x,className:"border-border/70 bg-card/90 shadow-sm transition focus-within:ring-2 focus-within:ring-primary",children:[(0,s.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between gap-4",children:[(0,s.jsx)(c.ll,{className:"text-base font-semibold tracking-tight",children:t.fighter_id}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",className:"cursor-grab touch-none select-none",...r,...n,children:"Drag"})]}),(0,s.jsxs)(c.aY,{className:"flex flex-col gap-2 text-sm text-muted-foreground",children:[t.notes?(0,s.jsx)("p",{className:"leading-relaxed",children:t.notes}):null,(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[t.tags.map(e=>(0,s.jsx)("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:e},"".concat(t.id,"-").concat(e))),t.tags.length?null:(0,s.jsx)("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs",children:"No tags yet"})]}),(0,s.jsxs)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/80",children:["Position #",t.position+1]})]})]})}var x=function(e){let{entries:t,onReorder:r,isReordering:a=!1}=e,[l,d]=(0,n.useState)(t),[c,x]=(0,n.useState)(t);(0,n.useEffect)(()=>{d(t),x(t)},[t]);let f=(0,i.Dy)((0,i.VT)(i.we,{activationConstraint:{distance:6}}),(0,i.VT)(i.Lg,{coordinateGetter:o.is})),g=(0,n.useMemo)(()=>l.map(e=>e.id),[l]);async function h(e){let{active:t,over:s}=e;if(!s||t.id===s.id)return;let n=l.findIndex(e=>e.id===t.id),a=l.findIndex(e=>e.id===s.id);if(-1===n||-1===a)return;let i=(0,o.Rp)(l,n,a);x(l),d(i);try{await r(i.map(e=>e.id))}catch(e){console.error("Failed to persist favorites reorder",e),d(c)}}return l.length?(0,s.jsxs)(i.LB,{sensors:f,onDragEnd:h,children:[(0,s.jsx)(o.Fo,{items:g,strategy:o.qw,children:(0,s.jsx)("div",{className:(0,u.cn)("grid gap-4 md:grid-cols-2",a&&"pointer-events-none opacity-70"),"aria-busy":a,children:l.map(e=>(0,s.jsx)(m,{entry:e},e.id))})}),a?(0,s.jsx)("p",{className:"mt-4 text-sm text-muted-foreground","aria-live":"polite",children:"Saving new ordering…"}):null]}):(0,s.jsx)("div",{className:"rounded-3xl border border-dashed border-border/60 bg-card/40 p-10 text-center text-sm text-muted-foreground",children:"No fighters in this collection yet. Use the search tools to add your first favorite."})},f=function(e){var t;let{collectionName:r,stats:n}=e,a=Math.round(1e3*n.win_rate)/10,i=Object.entries(null!==(t=n.result_breakdown)&&void 0!==t?t:{});return(0,s.jsxs)("section",{"aria-labelledby":"favorites-summary-heading",className:"space-y-4",children:[(0,s.jsxs)("header",{children:[(0,s.jsxs)("h2",{id:"favorites-summary-heading",className:"text-xl font-bold tracking-tight",children:[r," snapshot"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quick metrics summarising how this curated roster is performing."})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Total fighters"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("p",{className:"text-3xl font-bold",children:n.total_fighters})})]}),(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Win rate"})}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("p",{className:"text-3xl font-bold",children:[a.toFixed(1),"%"]})})]}),(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Divisions represented"})}),(0,s.jsxs)(c.aY,{children:[(0,s.jsx)("p",{className:"text-3xl font-bold",children:n.divisions.length}),(0,s.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:n.divisions.length?n.divisions.join(", "):"No divisions recorded"})]})]})]}),(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Result breakdown"})}),(0,s.jsx)(c.aY,{children:i.length?(0,s.jsx)("dl",{className:"grid grid-cols-2 gap-3 text-sm md:grid-cols-3",children:i.map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"rounded-lg bg-muted/40 p-3",children:[(0,s.jsx)("dt",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t}),(0,s.jsx)("dd",{className:"text-lg font-semibold",children:r})]},t)})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No fight history has been recorded yet."})})]}),(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Upcoming fights"})}),(0,s.jsx)(c.aY,{children:n.upcoming_fights.length?(0,s.jsx)("ul",{className:"space-y-2 text-sm",children:n.upcoming_fights.map(e=>(0,s.jsxs)("li",{className:"flex flex-col gap-1 rounded-lg border border-border/40 bg-background/40 p-3",children:[(0,s.jsx)("span",{className:"font-semibold text-foreground",children:e.fighter_id}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:["vs ",e.opponent_name," — ",e.event_name]}),e.event_date?(0,s.jsx)("span",{className:"text-xs text-muted-foreground/80",children:e.event_date}):null]},"".concat(e.fighter_id,"-").concat(e.event_name)))}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No upcoming bouts scheduled."})})]})]})},g=function(e){let{activity:t}=e;return(0,s.jsxs)("section",{"aria-labelledby":"favorites-activity-heading",className:"space-y-4",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h2",{id:"favorites-activity-heading",className:"text-xl font-bold tracking-tight",children:"Activity feed"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recent additions, edits, and reorder operations captured for auditing."})]}),(0,s.jsxs)(c.Zb,{className:"border-border/60 bg-card/80",children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"text-sm font-semibold text-muted-foreground",children:"Timeline"})}),(0,s.jsx)(c.aY,{children:t.length?(0,s.jsx)("ol",{className:"space-y-3",children:t.map(e=>{var t;return(0,s.jsxs)("li",{className:"flex flex-col gap-1 rounded-lg border border-border/40 bg-background/40 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[e.action," – ",e.fighter_id]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground/80",children:e.occurred_at})]}),Object.keys(null!==(t=e.metadata)&&void 0!==t?t:{}).length?(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-xs text-muted-foreground",children:JSON.stringify(e.metadata,null,2)}):null]},"".concat(e.entry_id,"-").concat(e.occurred_at,"-").concat(e.action))})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No recorded actions yet."})})]})]})},h=r(63979);async function p(e){var t;let r=new Blob([["Fighter ID,Notes,Tags,Position,Created At,Updated At",...e.entries.map(e=>{var t,r;let s=e.tags.join("|"),n=null!==(r=null===(t=e.notes)||void 0===t?void 0:t.replace(/"/g,'""'))&&void 0!==r?r:"";return[e.fighter_id,'"'.concat(n,'"'),'"'.concat(s,'"'),String(e.position),e.created_at,e.updated_at].join(",")})].join("\n")],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download="".concat(null!==(t=e.slug)&&void 0!==t?t:e.title,".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}async function b(e){}var j=function(e){var t;let{userId:r,initialCollections:i,initialDetail:o}=e,[l,m]=(0,n.useState)(i),[j,v]=(0,n.useState)(o),[N,y]=(0,n.useTransition)(),[w,k]=(0,n.useState)(!1),_=null!==(t=null==j?void 0:j.id)&&void 0!==t?t:null,C=(0,n.useMemo)(()=>{var e;return _&&null!==(e=l.find(e=>e.id===_))&&void 0!==e?e:null},[l,_]);async function O(e){if(j){k(!0);try{let t=await (0,h.yV)(j.id,{entry_ids:e},r);v(t),m(e=>e.map(e=>e.id===t.id?{...e,stats:t.stats}:e)),a.Am.success("Favorites order updated")}catch(e){console.error("Failed to reorder favorites",e),a.Am.error("Could not save new ordering",{description:e instanceof Error?e.message:"Unexpected error"})}finally{k(!1)}}}async function R(){if(!j){a.Am.warning("Select a collection before exporting");return}await p(j),a.Am.success("CSV download started")}async function S(){if(!j){a.Am.warning("Select a collection before exporting");return}await b(j),a.Am.info("PDF export is currently a placeholder. Check console for details.")}return l.length?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Favorites dashboard"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage custom fighter groupings, track performance, and export scouting notes."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.z,{variant:"default",onClick:R,disabled:!j,children:"Export CSV"}),(0,s.jsx)(d.z,{variant:"outline",onClick:S,disabled:!j,children:"Export PDF"})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-4",children:[(0,s.jsxs)("aside",{className:"lg:col-span-1 space-y-3",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold uppercase tracking-wide text-muted-foreground",children:"Collections"}),(0,s.jsx)("div",{className:"space-y-2",children:l.map(e=>{var t;return(0,s.jsxs)("button",{type:"button",onClick:()=>{y(()=>{(0,h.My)(e.id,r).then(e=>{v(e),m(t=>t.map(t=>t.id===e.id?{...t,stats:e.stats}:t))}).catch(e=>{console.error("Failed to load collection detail",e),a.Am.error("Unable to load favorites collection",{description:e instanceof Error?e.message:"Unknown error"})})})},disabled:N,className:(0,u.cn)("w-full rounded-xl border p-4 text-left transition","border-border/70 bg-card/70 hover:-translate-y-0.5 hover:bg-card",e.id===_?"border-primary bg-primary/10":"border-border/60"),children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-foreground",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:null!==(t=e.description)&&void 0!==t?t:"No description"})]},e.id)})})]}),(0,s.jsx)("main",{className:"space-y-6 lg:col-span-3",children:j&&C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{collectionName:C.title,stats:j.stats}),(0,s.jsx)(x,{entries:j.entries,onReorder:O,isReordering:w}),(0,s.jsx)(g,{activity:j.activity})]}):(0,s.jsx)(c.Zb,{className:"border-border/60 bg-card/80",children:(0,s.jsx)(c.aY,{className:"p-10 text-center text-sm text-muted-foreground",children:"Select a collection to view stats, activity, and reorder fighters."})})})]})]}):(0,s.jsx)(c.Zb,{className:"border-border/60 bg-card/80",children:(0,s.jsxs)(c.aY,{className:"space-y-4 p-10 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Favorites dashboard"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"You have not created any collections yet. Visit fighter profiles to start curating your personal roster."})]})})}},2581:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(41922),n=r(91115),a=r(78235);let i={default:"bg-foreground text-background hover:bg-foreground/90",outline:"border border-border bg-background text-foreground hover:bg-muted hover:text-foreground",ghost:"bg-transparent hover:bg-muted",link:"bg-transparent underline-offset-4 hover:underline"},o={default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-5",icon:"h-10 w-10"},l=(0,n.forwardRef)((e,t)=>{let{className:r,variant:l="default",size:d="default",type:c="button",asChild:u=!1,children:m,...x}=e,f=(0,a.cn)("inline-flex items-center justify-center rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50",i[l],o[d],r);return u&&(0,n.isValidElement)(m)?(0,n.cloneElement)(m,{className:(0,a.cn)(f,m.props.className),ref:t,...x}):(0,s.jsx)("button",{ref:t,type:c,className:f,...x,children:m})});l.displayName="Button"},52711:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var s=r(41922),n=r(91115),a=r(78235);let i=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("group/card relative rounded-3xl border border-border bg-card text-card-foreground shadow-sm transition-colors",r),...n})});i.displayName="Card";let o=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col gap-2 p-6 pb-0",r),...n})});o.displayName="CardHeader";let l=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-lg font-semibold tracking-tight",r),...n})});l.displayName="CardTitle";let d=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-4",r),...n})});c.displayName="CardContent";let u=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},78235:function(e,t,r){"use strict";r.d(t,{CO:function(){return d},Qm:function(){return a},T_:function(){return l},cn:function(){return n}});var s=r(63955);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.W)(t)}function a(e){var t,r;if(!e)return"";let s=e.trim().split(/\s+/).filter(Boolean);if(0===s.length)return"";if(1===s.length)return s[0].slice(0,2).toUpperCase();let n=null!==(t=s[0][0])&&void 0!==t?t:"",a=null!==(r=s[s.length-1][0])&&void 0!==r?r:"";return"".concat(n).concat(a).toUpperCase()}let i=["bg-blue-500/90 border-blue-500/50","bg-purple-500/90 border-purple-500/50","bg-amber-500/90 border-amber-500/50","bg-emerald-500/90 border-emerald-500/50","bg-rose-500/90 border-rose-500/50","bg-sky-500/90 border-sky-500/50","bg-indigo-500/90 border-indigo-500/50","bg-orange-500/90 border-orange-500/50"],o=new Map;function l(e){var t;let r=null!==(t=null==e?void 0:e.toLowerCase())&&void 0!==t?t:"",s=o.get(r);if(s)return s;if(!e)return o.set(r,i[0]),i[0];let n=0;for(let t=0;t<e.length;t+=1)n=(n<<5)-n+e.charCodeAt(t)|0;let a=Math.abs(n)%i.length,l=i[a];if(o.size>=512){let e=o.keys().next().value;o.delete(e)}return o.set(r,l),l}function d(e){var t;if(!e)return null;if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:"))return e;let r=(t="https://ufc.wolfgangschoenberger.com/api","https://ufc.wolfgangschoenberger.com/api").replace(/\/+$/,""),s=e.replace(/^\/+/,"");return"".concat(r,"/").concat(s)}}},function(e){e.O(0,[1933,9185,4808,747,3979,2474,5633,1744],function(){return e(e.s=80862)}),_N_E=e.O()}]);