"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3979],{63979:function(t,e,i){i.d(e,{od:function(){return C},lO:function(){return q},eQ:function(){return b},uZ:function(){return Z},My:function(){return y},uK:function(){return v},bZ:function(){return M},jf:function(){return m},Cs:function(){return k},Np:function(){return F},v2:function(){return _},Q7:function(){return w},yV:function(){return S},Cf:function(){return p}});var n=i(70747),o=i(83651),r=i(46072),a=i(78564);let l=o.Ry({fighter_id:o.Z_().min(1,"fighter_id is required"),name:o.Z_().min(1,"name is required"),division:o.Z_().nullable().optional(),record:o.Z_().nullable().optional(),image_url:o.Z_().nullable().optional(),total_fights:o.Rx().int().nonnegative(),latest_event_date:o.Z_().nullable().optional()}),s=o.IM(o.Ry({win:o.Rx().int().nonnegative().optional(),loss:o.Rx().int().nonnegative().optional(),draw:o.Rx().int().nonnegative().optional(),nc:o.Rx().int().nonnegative().optional(),upcoming:o.Rx().int().nonnegative().optional(),other:o.Rx().int().nonnegative().optional()}).catchall(o.Rx().int().nonnegative().optional())),d=o.Ry({source:o.Z_().min(1,"source is required"),target:o.Z_().min(1,"target is required"),fights:o.Rx().int().nonnegative(),first_event_name:o.Z_().nullable().optional(),first_event_date:o.Z_().nullable().optional(),last_event_name:o.Z_().nullable().optional(),last_event_date:o.Z_().nullable().optional(),result_breakdown:s}),c=o.Ry({nodes:o.IX(l),links:o.IX(d),metadata:o.IM(o._4()).default({})});async function u(t){let e;let i=function(t){let e=new URLSearchParams;for(let[i,n]of Object.entries(t))"boolean"==typeof n?e.set(i,n?"true":"false"):e.set(i,String(n));let i=e.toString();return i.length>0?"?".concat(i):""}(function(t){let e={};return t.division&&t.division.trim().length>0&&(e.division=t.division.trim()),"number"==typeof t.startYear&&Number.isFinite(t.startYear)&&(e.start_year=t.startYear),"number"==typeof t.endYear&&Number.isFinite(t.endYear)&&(e.end_year=t.endYear),"number"==typeof t.limit&&Number.isFinite(t.limit)&&(e.limit=t.limit),"boolean"==typeof t.includeUpcoming&&(e.include_upcoming=t.includeUpcoming),e}(t)),n=function(){try{return(0,r.Vc)("https://ufc.wolfgangschoenberger.com/api",r.es)}catch(t){throw new a.MS("Invalid API base URL",{statusCode:500,detail:t instanceof Error?t.message:"Unable to resolve base URL",context:"fightGraphClient"})}}(),o="".concat(n,"/fightweb/graph").concat(i);try{e=await fetch(o,{method:"GET",headers:{Accept:"application/json"},cache:"no-store"})}catch(t){throw new a.MS("Failed to reach the FightWeb service",{statusCode:503,detail:t instanceof Error?t.message:void 0,context:"fightGraphClient"})}if(!e.ok){let t=await e.json().catch(()=>({detail:e.statusText}));throw new a.MS("Fight graph request failed",{statusCode:e.status,detail:"string"==typeof(null==t?void 0:t.detail)?t.detail:void 0,context:"fightGraphClient"})}let l=await e.json(),s=c.safeParse(l);if(!s.success)throw new a.MS("Fight graph response validation failed",{statusCode:500,detail:s.error.message,context:"fightGraphClient"});return s.data}function f(t){return"object"==typeof t&&null!==t&&"status"in t&&"number"==typeof t.status?t.status:500}function h(t,e,i){let n=f(t),o=function(t){if("object"==typeof t&&null!==t&&"detail"in t){let e=t.detail;return"string"==typeof e?e:void 0}}(t);throw new a.MS(o||e,{statusCode:n,detail:o,context:i})}function g(t,e,i,n,o){if(404===f(t))throw new a.dR(e,i);h(t,n,o)}async function _(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{data:i,error:o}=await n.Z.GET("/fighters/",{params:{query:{limit:t,offset:e,include_streak:!0,streak_window:6}}});if(o&&h(o,"Failed to fetch fighters"),!i)throw new a.MS("No data returned from API",{statusCode:500});return i}async function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:20,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=t.trim(),f={limit:d,offset:c,include_streak:!0,streak_window:6};u.length>0&&(f.q=u),e&&e.length>0&&(f.stance=e),i&&i.length>0&&(f.division=i),o&&o.length>0&&(f.nationality=o),r.length>0&&(f.champion_statuses=r),l&&null!==s&&s>0&&(f.streak_type=l,f.min_streak_count=s);let{data:g,error:_}=await n.Z.GET("/search/",{params:{query:f}});if(_&&h(_,"Search failed"),!g)throw new a.MS("No data returned from search",{statusCode:500});return g}async function w(){let{data:t,error:e}=await n.Z.GET("/fighters/random");if(e&&h(e,"Failed to fetch random fighter"),!t)throw new a.MS("No fighter data returned",{statusCode:500});return t}async function m(t){let{data:e,error:i}=await n.Z.GET("/fighters/{fighter_id}",{params:{path:{fighter_id:t}}});if(i&&g(i,"Fighter",'Fighter with ID "'.concat(t,'" not found'),"Failed to fetch fighter"),!e)throw new a.MS("No fighter data returned",{statusCode:500});return e}async function v(t){let{data:e,error:i}=await n.Z.GET("/favorites/collections",{params:{query:{user_id:t}}});if(i&&h(i,"Failed to fetch collections"),!e)throw new a.MS("No collection data returned",{statusCode:500});return{total:e.total,collections:e.collections.map(t=>({...t,collection_id:t.id}))}}async function y(t,e){var i,o;let r={};e&&e.trim().length>0&&(r.user_id=e);let{data:l,error:s}=await n.Z.GET("/favorites/collections/{collection_id}",{params:{path:{collection_id:t},query:Object.keys(r).length>0?r:void 0}});if(s&&g(s,"FavoriteCollection","Collection ".concat(t," not found"),"Failed to fetch collection"),!l)throw new a.MS("No collection data returned",{statusCode:500});return{...l,collection_id:l.id,entries:null!==(o=null===(i=l.entries)||void 0===i?void 0:i.map(t=>({...t,entry_id:t.id,collection_id:l.id})))&&void 0!==o?o:[]}}async function b(t){var e,i;let{data:o,error:r}=await n.Z.POST("/favorites/collections",{body:t});if(r&&h(r,"Failed to create collection"),!o)throw new a.MS("No collection data returned",{statusCode:500});return{...o,collection_id:o.id,entries:null!==(i=null===(e=o.entries)||void 0===e?void 0:e.map(t=>({...t,entry_id:t.id,collection_id:o.id})))&&void 0!==i?i:[]}}async function C(t,e,i){let o={};i&&i.trim().length>0&&(o.user_id=i);let{data:r,error:l}=await n.Z.POST("/favorites/collections/{collection_id}/entries",{params:{path:{collection_id:t},query:Object.keys(o).length>0?o:void 0},body:e});if(l&&h(l,"Failed to add favorite"),!r)throw new a.MS("No entry data returned",{statusCode:500});return{...r,entry_id:r.id,collection_id:t}}async function S(t,e,i){var o,r;let l={};i&&i.trim().length>0&&(l.user_id=i);let{data:s,error:d}=await n.Z.POST("/favorites/collections/{collection_id}/entries/reorder",{params:{path:{collection_id:t},query:Object.keys(l).length>0?l:void 0},body:e});if(d&&h(d,"Failed to reorder entries"),!s)throw new a.MS("No collection data returned",{statusCode:500});return{...s,collection_id:s.id,entries:null!==(r=null===(o=s.entries)||void 0===o?void 0:o.map(t=>({...t,entry_id:t.id,collection_id:s.id})))&&void 0!==r?r:[]}}async function Z(t,e,i){let o={};i&&i.trim().length>0&&(o.user_id=i);let{error:r}=await n.Z.DELETE("/favorites/collections/{collection_id}/entries/{entry_id}",{params:{path:{collection_id:t,entry_id:e},query:Object.keys(o).length>0?o:void 0}});r&&h(r,"Failed to delete entry")}async function M(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(t)}async function q(t){if(t.length<2)throw new a.MS("Select at least two fighters to compare.",{statusCode:400,detail:"Comparison requires at least two fighter IDs"});let{data:e,error:i}=await n.Z.GET("/fighters/compare",{params:{query:{fighter_ids:t.filter(Boolean)}}});if(i&&h(i,"Failed to compare fighters"),!e)throw new a.MS("No comparison data returned",{statusCode:500});return e}async function F(t,e){if(!t)throw new a.MS("fighterId is required",{statusCode:400});let i={};(null==e?void 0:e.limit)&&(i.limit=e.limit),(null==e?void 0:e.qualityMin)&&(i.quality_min=e.qualityMin);let{data:o,error:r}=await n.Z.GET("/odds/fighter/{fighter_id}",{params:{path:{fighter_id:t},query:Object.keys(i).length?i:void 0}});if(r&&h(r,"Failed to fetch fighter odds history","fighter:".concat(t)),!o)throw new a.MS("No odds history returned",{statusCode:500});return o}async function k(t,e){if(!t)throw new a.MS("fighterId is required",{statusCode:400});let{data:i,error:o}=await n.Z.GET("/odds/fighter/{fighter_id}/chart",{params:{path:{fighter_id:t},query:(null==e?void 0:e.limit)?{limit:e.limit}:void 0}});if(o&&h(o,"Failed to fetch fighter odds chart","fighter:".concat(t)),!i)throw new a.MS("No odds chart data returned",{statusCode:500});return i}}}]);